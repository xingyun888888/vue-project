webpackJsonp([8],{430:function(e,t,a){a(504);var o=a(102)(a(458),a(531),"data-v-e890ecb2",null);e.exports=o.exports},458:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(103);t.default={name:"cachePage",data:function(){var e=this;return{activeName2:"userList",showOverflowTooltip:!0,pageNum:1,pages:2,pageSize:15,total:0,dialogVisible:!1,tableData:[],form:{subordinateCompanies:"",subordinateDepartment:"",jobNumber:"",name:"",userName:"",password:"",confirmPassword:"",mailbox:"",phone:"",iphone:"",whether:"",userType:"",userRole:[],remark:""},modificationForm:{subordinateCompanies:"",subordinateDepartment:"",jobNumber:"",name:"",userName:"",password:"",confirmPassword:"",mailbox:"",phone:"",iphone:"",whether:"",userType:"",userRole:[],remark:""},userAppend:{subordinateDepartment:[{required:!0,message:"请选择",trigger:"change"}],jobNumber:[{required:!0,message:"工号不能为空",trigger:"blur"}],name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],userName:[{required:!0,message:"登录名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],confirmPassword:[{required:!0,message:"密码不能为空",trigger:"blur"},{validator:function(t,a,o){setTimeout(function(){a!=e.form.password?o(new Error("请填入相同密码")):o()},500)},trigger:"blur"}],whether:[{required:!0,message:"请选择",trigger:"change"}],userRole:[{type:"array",required:!0,message:"请选择用户角色",trigger:"change"}],mailbox:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{validator:function(e,t,a){setTimeout(function(){t&&/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/i.test(t)?a():a(new Error("请书写正确邮箱格式"))},500)},trigger:"blur"}],iphone:[{required:!0,message:"手机不能为空",trigger:"blur"}],userType:[{required:!0,message:"请选择用户类型",trigger:"change"}]}}},methods:{getBack:function(){this.activeName2="userList"},modification:function(e,t){this.dialogVisible=!0,this.modificationForm.jobNumber=t[e].jobNumber,this.modificationForm.name=t[e].name,this.modificationForm.iphone=t[e].iphone,this.modificationForm.phone=t[e].phone,this.modificationForm.userName=t[e].username},confirm:function(){this.dialogVisible=!1,this.$message({message:"保存成功！",type:"success"})},handleDelete:function(e,t){var a=this,i=this,l={id:t[e].id};i.$confirm("要删除该机构及所有子机构项吗？","提示",{cancelButtonText:"取消",confirmButtonText:"确认"}).then(function(){a.$ajax({method:"POST",url:"user/remove",data:o.stringify(l),dataType:"json"}).then(function(a){var o=a.data;0==o.statusCode?(i.$message({message:"删除成功！",type:"success"}),t.splice(e,1)):i.requestErrorHandler(o)}).catch(function(){i.catchErrorHandler()})}).catch(function(){})},saveBtn:function(e){var t=this,a=this;console.log(this.form);var i={"dept.id":this.form.subordinateDepartment,roleList:this.form.userRole,name:this.form.name,username:this.form.userName,password:this.form.password,no:this.form.jobNumber,email:this.form.mailbox,mobile:this.form.iphone,userType:this.form.userType,photo:"",loginFlag:this.form.whether};this.$refs[e].validate(function(e){e?t.$ajax({method:"POST",url:"user/save",data:o.stringify(i),dataType:"json"}).then(function(e){var t=e.data;0==t.statusCode?(a.$message({message:"保存成功",type:"success"}),a.activeName2="userList",a.requestTable()):a.$message({message:t.body+"!",type:"error"})}).catch(function(){a.$message({message:"保存失败，请核查填入内容！",type:"error"})}):a.$message({message:"保存失败，请核查填入内容！",type:"error"})})},handleSizeChange:function(e){this.pageSize=e,this.requestTable()},handleCurrentChange:function(e){this.pageNum=e,this.requestTable()},requestTable:function(){var e=this,t={pageNum:this.pageNum,pageSize:this.pageSize};this.$ajax({method:"POST",url:"user/listData",data:o.stringify(t)}).then(function(t){var a=t.data;0==a.statusCode&&(e.tableData=[],e.renderTable(a.body.list),e.setPagination(a.body))})},renderTable:function(e){for(var t=0;t<e.length;t++){var a={jobNumber:e[t].loginFlag,username:e[t].username,name:e[t].name,iphone:e[t].mobile,phone:e[t].mobile,id:e[t].id};this.tableData.push(a)}},setPagination:function(e){this.pages=e.pages,this.pageSize=e.pageSize,this.total=e.total}},created:function(){this.requestTable()},mounted:function(){}}},482:function(e,t,a){t=e.exports=a(411)(!0),t.push([e.i,".container-body[data-v-e890ecb2]{min-height:730px!important}.institutions-add[data-v-e890ecb2]{margin-left:5%;margin-top:30px}.prompt-text[data-v-e890ecb2]{margin-left:20px;color:#aaa}.comment span[data-v-e890ecb2]{display:inline-block;width:117px;text-align:right;vertical-align:top;margin-right:8px}.comment textarea[data-v-e890ecb2]{width:369px;max-width:369px;outline:none;height:120px;padding:5px}.comment textarea[data-v-e890ecb2]:focus{border:1px solid #47bd96}.left-justifying[data-v-e890ecb2]{text-align:left}","",{version:3,sources:["F:/ppfund-cgws/src/views/systemSettings/Institutional/productLicensing.vue"],names:[],mappings:"AACA,iCACE,0BAA6B,CAC9B,AACD,mCACE,eAAgB,AAChB,eAAiB,CAClB,AACD,8BACE,iBAAkB,AAClB,UAAY,CACb,AACD,+BACE,qBAAsB,AACtB,YAAa,AACb,iBAAkB,AAClB,mBAAoB,AACpB,gBAAkB,CACnB,AACD,mCACE,YAAa,AACb,gBAAiB,AACjB,aAAc,AACd,aAAc,AACd,WAAa,CACd,AACD,yCACE,wBAA0B,CAC3B,AACD,kCACE,eAAiB,CAClB",file:"productLicensing.vue",sourcesContent:["\n.container-body[data-v-e890ecb2] {\n  min-height: 730px !important;\n}\n.institutions-add[data-v-e890ecb2] {\n  margin-left: 5%;\n  margin-top: 30px;\n}\n.prompt-text[data-v-e890ecb2] {\n  margin-left: 20px;\n  color: #aaa;\n}\n.comment span[data-v-e890ecb2] {\n  display: inline-block;\n  width: 117px;\n  text-align: right;\n  vertical-align: top;\n  margin-right: 8px;\n}\n.comment textarea[data-v-e890ecb2] {\n  width: 369px;\n  max-width: 369px;\n  outline: none;\n  height: 120px;\n  padding: 5px;\n}\n.comment textarea[data-v-e890ecb2]:focus {\n  border: 1px solid #47bd96;\n}\n.left-justifying[data-v-e890ecb2] {\n  text-align: left;\n}\n"],sourceRoot:""}])},504:function(e,t,a){var o=a(482);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(412)("2aa1cca0",o,!0)},531:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-body"},[a("el-tabs",{staticClass:"tabs-body",attrs:{stripe:"",type:"border-card"},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{staticStyle:{"margin-top":"30px"},attrs:{label:"用户列表",name:"userList"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"jobNumber",label:"工号",align:"center","show-overflow-tooltip":e.showOverflowTooltip}}),e._v(" "),a("el-table-column",{attrs:{prop:"companyAffiliation",label:"归属公司",align:"center","show-overflow-tooltip":e.showOverflowTooltip}}),e._v(" "),a("el-table-column",{attrs:{prop:"attributionDepartment",label:"归属部门",align:"center","show-overflow-tooltip":e.showOverflowTooltip}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"登入名",align:"center","show-overflow-tooltip":e.showOverflowTooltip}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center","show-overflow-tooltip":e.showOverflowTooltip}}),e._v(" "),a("el-table-column",{attrs:{prop:"iphone",label:"电话",align:"center","show-overflow-tooltip":e.showOverflowTooltip}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机",align:"center","show-overflow-tooltip":e.showOverflowTooltip}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"230","show-overflow-tooltip":e.showOverflowTooltip},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"info"},on:{click:function(a){e.modification(t.$index,e.tableData)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){e.handleDelete(t.$index,e.tableData)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,15,20],"page-size":e.pageSize,layout:"prev, pager, next, jumper, sizes",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,title:"用户修改",width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.modificationForm,"label-width":"80px"}},[a("el-form-item",{staticClass:"left-justifying",attrs:{label:"所属公司:","label-width":"128px"}},[a("el-select",{staticStyle:{width:"380px"},attrs:{placeholder:"请选择机构"},model:{value:e.modificationForm.subordinateCompanies,callback:function(t){e.modificationForm.subordinateCompanies=t},expression:"modificationForm.subordinateCompanies"}},[a("el-option",{attrs:{label:"区域一",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"left-justifying",attrs:{label:"所属部门:","label-width":"128px"}},[a("el-select",{staticStyle:{width:"380px"},attrs:{placeholder:"请选择部门"},model:{value:e.modificationForm.subordinateDepartment,callback:function(t){e.modificationForm.subordinateDepartment=t},expression:"modificationForm.subordinateDepartment"}},[a("el-option",{attrs:{label:"区域一",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"工号:","label-width":"128px"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.modificationForm.jobNumber,callback:function(t){e.modificationForm.jobNumber=t},expression:"modificationForm.jobNumber"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名:","label-width":"128px"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.modificationForm.name,callback:function(t){e.modificationForm.name=t},expression:"modificationForm.name"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"登录名:","label-width":"128px"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.modificationForm.userName,callback:function(t){e.modificationForm.userName=t},expression:"modificationForm.userName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"密码:","label-width":"128px"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.modificationForm.password,callback:function(t){e.modificationForm.password=t},expression:"modificationForm.password"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码:","label-width":"128px"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.modificationForm.confirmPassword,callback:function(t){e.modificationForm.confirmPassword=t},expression:"modificationForm.confirmPassword"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱:","label-width":"128px"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.modificationForm.mailbox,callback:function(t){e.modificationForm.mailbox=t},expression:"modificationForm.mailbox"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:","label-width":"128px"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.modificationForm.phone,callback:function(t){e.modificationForm.phone=t},expression:"modificationForm.phone"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机:","label-width":"128px"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.modificationForm.iphone,callback:function(t){e.modificationForm.iphone=t},expression:"modificationForm.iphone"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"left-justifying",attrs:{label:"是否允许登录:","label-width":"128px"}},[a("el-select",{staticStyle:{width:"70px"},attrs:{placeholder:""},model:{value:e.modificationForm.whether,callback:function(t){e.modificationForm.whether=t},expression:"modificationForm.whether"}},[a("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"否",value:"2"}})],1),e._v(" "),a("span",{staticClass:"prompt-text"},[e._v("“是”代表此账号允许登陆，“否”则表示此账号不允许登陆")])],1),e._v(" "),a("el-form-item",{staticClass:"left-justifying",attrs:{label:"用户类型:","label-width":"128px"}},[a("el-select",{staticStyle:{width:"380px"},model:{value:e.modificationForm.userType,callback:function(t){e.modificationForm.userType=t},expression:"modificationForm.userType"}},[a("el-option",{attrs:{label:"区域一",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"left-justifying",attrs:{label:"用户角色:","label-width":"128px"}},[a("el-checkbox-group",{model:{value:e.modificationForm.userRole,callback:function(t){e.modificationForm.userRole=t},expression:"modificationForm.userRole"}},[a("el-checkbox",{attrs:{label:"本部门管理员",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"过会审核人",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"部门管理员",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"FA岗位",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"TA岗位",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"估值岗位",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"公司管理员",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"太平洋证券",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"普通用户",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"申报人",name:"type"}})],1)],1),e._v(" "),a("div",{staticClass:"comment left-justifying"},[a("span",[e._v("备注:")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.modificationForm.remark,expression:"modificationForm.remark"}],staticStyle:{"max-width":"calc(100% - 200px)"},domProps:{value:e.modificationForm.remark},on:{input:function(t){t.target.composing||(e.modificationForm.remark=t.target.value)}}})])],1),e._v(" "),a("span",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("保 存")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"用户添加",name:"userAdd"}},[a("el-form",{ref:"form",staticClass:"institutions-add",attrs:{model:e.form,rules:e.userAppend,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"所属公司:","label-width":"128px"}},[a("el-select",{staticStyle:{width:"380px"},attrs:{placeholder:"请选择机构"},model:{value:e.form.subordinateCompanies,callback:function(t){e.form.subordinateCompanies=t},expression:"form.subordinateCompanies"}},[a("el-option",{attrs:{label:"区域一",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所属部门:","label-width":"128px",prop:"subordinateDepartment"}},[a("el-select",{staticStyle:{width:"380px"},attrs:{placeholder:"请选择部门"},model:{value:e.form.subordinateDepartment,callback:function(t){e.form.subordinateDepartment=t},expression:"form.subordinateDepartment"}},[a("el-option",{attrs:{label:"区域一",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"工号:","label-width":"128px",prop:"jobNumber"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.form.jobNumber,callback:function(t){e.form.jobNumber=t},expression:"form.jobNumber"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名:","label-width":"128px",prop:"name"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"登录名:","label-width":"128px",prop:"userName"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.form.userName,callback:function(t){e.form.userName=t},expression:"form.userName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"密码:","label-width":"128px",prop:"password"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{staticStyle:{display:"none"},attrs:{type:"password",name:"password"}}),e._v(" "),a("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.form.password=t},expression:"form.password"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码:","label-width":"128px",prop:"confirmPassword"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{staticStyle:{display:"none"},attrs:{type:"password",name:"password"}}),e._v(" "),a("el-input",{attrs:{type:"password"},model:{value:e.form.confirmPassword,callback:function(t){e.form.confirmPassword=t},expression:"form.confirmPassword"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱:","label-width":"128px",prop:"mailbox"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.form.mailbox,callback:function(t){e.form.mailbox=t},expression:"form.mailbox"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:","label-width":"128px"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.form.phone,callback:function(t){e.form.phone=t},expression:"form.phone"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机:","label-width":"128px",prop:"iphone"}},[a("el-col",{staticStyle:{width:"380px"}},[a("el-input",{model:{value:e.form.iphone,callback:function(t){e.form.iphone=t},expression:"form.iphone"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否允许登录:","label-width":"128px",prop:"whether"}},[a("el-select",{staticStyle:{width:"70px"},attrs:{placeholder:""},model:{value:e.form.whether,callback:function(t){e.form.whether=t},expression:"form.whether"}},[a("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"否",value:"2"}})],1),e._v(" "),a("span",{staticClass:"prompt-text"},[e._v("“是”代表此账号允许登陆，“否”则表示此账号不允许登陆")])],1),e._v(" "),a("el-form-item",{attrs:{label:"用户类型:","label-width":"128px",prop:"userType"}},[a("el-select",{staticStyle:{width:"380px"},model:{value:e.form.userType,callback:function(t){e.form.userType=t},expression:"form.userType"}},[a("el-option",{attrs:{label:"区域一",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户角色:","label-width":"128px",prop:"userRole"}},[a("el-checkbox-group",{model:{value:e.form.userRole,callback:function(t){e.form.userRole=t},expression:"form.userRole"}},[a("el-checkbox",{attrs:{label:"1",name:"type"}},[e._v("本部门管理员")]),e._v(" "),a("el-checkbox",{attrs:{label:"2",name:"type"}},[e._v("过会审核人")]),e._v(" "),a("el-checkbox",{attrs:{label:"3",name:"type"}},[e._v("部门管理员")]),e._v(" "),a("el-checkbox",{attrs:{label:"4",name:"type"}},[e._v("FA岗位")]),e._v(" "),a("el-checkbox",{attrs:{label:"5",name:"type"}},[e._v("TA岗位")]),e._v(" "),a("el-checkbox",{attrs:{label:"6",name:"type"}},[e._v("估值岗位")]),e._v(" "),a("el-checkbox",{attrs:{label:"7",name:"type"}},[e._v("公司管理员")]),e._v(" "),a("el-checkbox",{attrs:{label:"8",name:"type"}},[e._v("太平洋证券")]),e._v(" "),a("el-checkbox",{attrs:{label:"9",name:"type"}},[e._v("普通用户")]),e._v(" "),a("el-checkbox",{attrs:{label:"10",name:"type"}},[e._v("申报人")])],1)],1),e._v(" "),a("div",{staticClass:"comment"},[a("span",[e._v("备注:")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.remark,expression:"form.remark"}],staticStyle:{"max-width":"calc(100% - 200px)"},domProps:{value:e.form.remark},on:{input:function(t){t.target.composing||(e.form.remark=t.target.value)}}})]),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveBtn("form")}}},[e._v("保存")]),e._v(" "),a("el-button",{nativeOn:{click:function(t){e.getBack(t)}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=8.be9ff2dbcc058a327c38.js.map